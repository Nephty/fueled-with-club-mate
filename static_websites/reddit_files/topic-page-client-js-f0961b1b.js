import{f as t,a as e,_ as i,t as s,q as o,e as a}from"./shell-0c1a6a5f.js";import{s as r,x as c,i as n}from"./icon-d63689a2.js";import"./reddit-page-data-dec88f1f.js";import"./shreddit-tweet-embed-7134507b.js";import"./shreddit-post-dad24389.js";import"./faceplate-tabpanel-aca84962.js";import"./faceplate-number-164fec52.js";import"./faceplate-tablist-d6b280fd.js";import"./faceplate-tabgroup-e0d9e627.js";import"./faceplate-dropdown-menu-39ca0ac3.js";import"./faceplate-menu-90109fb4.js";import"./post-2880b3fb.js";import"./post-d6ddae05.js";import"./faceplate-date-04568646.js";import"./locale-e49f0b05.js";import"./index-13c19cb6.js";import"./content-action-button-bd91a391.js";import"./award-controller-74c9ea52.js";import"./award-0c289050.js";import"./index-e62e400a.js";import"./utils-75a02ea9.js";import"./awardsTelemetryState-c9528301.js";import"./rpl-tooltip-f3da0c03.js";import"./contains-1042b204.js";import"./mod-actions-controller-37a20ab4.js";import"./list-item-a0d61a87.js";import"./custom-event-8a5c1c61.js";import"./add-removal-reason-modal-c2d7012f.js";import"./utils-147dae00.js";import"./modActions-1a61d389.js";import"./keyed-4ff60172.js";import"./faceplate-form-4c89c43a.js";import"./form-common-utils-9ca05afe.js";import"./comment-adaef8ff.js";import"./modActions-696474ac.js";import"./postUpdate-b405bb17.js";import"./faceplate-input-13282be3.js";import"./input-element-79efc63d.js";import"./dropdownButton-710bc59e.js";import"./faceplate-modal-1a85daaa.js";import"./faceplate-textarea-input-2258cd5f.js";import"./live-daee7cff.js";import"./text-input-120feb09.js";import"./remove-highlighted-post-ca311597.js";import"./pdp-a697afbf.js";import"./throttle-cde4a556.js";import"./faceplate-shimmer-5508625d.js";import"./click-card-9ae4a471.js";import"./faceplate-hovercard-49b0769f.js";import"./popper-controller-40911cde.js";import"./makeEventDispatcher-28989282.js";import"./faceplate-tooltip-ee0c1178.js";import"./post-guidance-feedback-48d8cd4b.js";import"./content-tags-2a554850.js";import"./shreddit-post-share-button-480f52b5.js";import"./with-share-55bbe63d.js";import"./a-a07c04f4.js";import"./index-6b6f75e3.js";import"./faceplate-carousel-93d31764.js";import"./TinyGesture-6f7cc1aa.js";import"./badge-987c2de0.js";import"./expandable-mod-reports-base-e01f2932.js";import"./outbound-link-tracking-controller-fc0053cf.js";import"./promote-post-button-351b1449.js";import"./utils-5ae845f1.js";import"./events-a107d019.js";import"./shreddit-rpl-action-bar-update-6e61b397.js";import"./overflow-menu-actions-66d578dd.js";import"./shreddit-overflow-report-ad3b0424.js";import"./v2-events-554a9594.js";import"./classnameUtils-e77f7123.js";import"./mod-verdict-9cae4843.js";import"./index-b5439860.js";import"./pageable-832f4cce.js";import"./number-ea0536b9.js";import"./cached-intl-e5b35306.js";const l={posts:1,communities:2,related_topics:3},p=t(r);let d=class extends p{constructor(){super(),this.selectedTab=null,this.onSeeAllClick=t=>{if(!t.topicNumber||!t.topicName)return void(this.tabs.pageIndex=t.tab);this.tabs.pageIndex=t.tab,this.relatedTopicsSelect.pageIndex=Number(t.topicNumber);const e=this.relatedTopicsDropdown?.children&&Array.from(this.relatedTopicsDropdown.children).find((t=>t.textContent));e&&(e.textContent=t.topicName)},this.handleTabButtonClick=t=>{const e=t?.target,i=e?.closest("button");this.selectedTab=i.slot,this.publish(o.TopicPageTabChanged,this.selectedTab)},this.handleTopicsButtonClick=t=>{this.topicsDropdownMenu?.close();const e=t?.target?.textContent;if(!e||!this.relatedTopicsDropdown)return;const i=Array.from(this.relatedTopicsDropdown.children).find((t=>t.textContent));i&&(i.textContent=e)},this.initialActiveTab=window.location?.hash.substring(1)}get relatedTopicsDropdown(){return this.querySelector(".related-topics-dropdown")}get relatedTopicsButtons(){return this.querySelectorAll(".related-topics-button")}get relatedTopicsSelect(){return document.querySelector("#related-topics-tabgroup")}get topicsDropdownMenu(){return this.querySelector("#topics-dropdown-menu")}get tabButtons(){return this.querySelectorAll("#topic-tabgroup button")}get tabs(){return this.querySelector("#topic-tabgroup")}connectedCallback(){super.connectedCallback(),this.subscribe(o.TopicPageSeeAllClicked,this.onSeeAllClick)}firstUpdated(){this.setInitialPageIndex(),this.relatedTopicsButtons.forEach((t=>{t.addEventListener("click",this.handleTopicsButtonClick)})),this.tabButtons.forEach((t=>{t.addEventListener("click",this.handleTabButtonClick)}))}disconnectedCallback(){super.disconnectedCallback(),this.unsubscribe(o.TopicPageSeeAllClicked,this.onSeeAllClick),this.relatedTopicsButtons.forEach((t=>{t.removeEventListener("click",this.handleTopicsButtonClick)})),this.tabButtons.forEach((t=>{t.removeEventListener("click",this.handleTabButtonClick)}))}setInitialPageIndex(){if(this.tabs&&this.initialActiveTab){const t=l[this.initialActiveTab];if(!t)return;this.tabs.pageIndex=t}}render(){return c`\n <div>\n <slot name="tabs" class="block"></slot>\n <div class="pt-sm pb-lg px-xs">\n <slot name="tab-panel"></slot>\n </div>\n </div>\n `}};d.styles=[e],i([s()],d.prototype,"selectedTab",void 0),d=i([a("topic-tabs")],d);const m=t(r);var b;!function(t){t["page-1"]="posts",t["page-2"]="communities",t["page-3"]="relatedTopics"}(b||(b={}));let h=class extends m{constructor(){super(...arguments),this.activeTab="posts",this.onActiveTabChange=t=>{this.activeTab=b[t]},this.handleSeeAll=t=>{const e=t.target,i=e.getAttribute("data-topicname"),s=e.getAttribute("data-topicnumber");this.activeTab=b["page-3"],this.publish(o.TopicPageSeeAllClicked,{tab:3,topicNumber:Number(s),topicName:i})},this.handleSeeAllCommunities=()=>{this.activeTab=b["page-2"],this.publish(o.TopicPageSeeAllClicked,{tab:2})}}get seeAllTopics(){return document.querySelectorAll(".see-all")}get seeAllCommunities(){return document.querySelectorAll(".see-all-communities")}firstUpdated(){const t=new URLSearchParams(location.search).get("activeTab")??"posts";this.activeTab=t,this.seeAllTopics.forEach((t=>{t.addEventListener("click",this.handleSeeAll)})),this.seeAllCommunities.forEach((t=>{t.addEventListener("click",this.handleSeeAllCommunities)}))}connectedCallback(){super.connectedCallback(),this.subscribe(o.TopicPageTabChanged,this.onActiveTabChange)}disconnectedCallback(){this.unsubscribe(o.TopicPageTabChanged,this.onActiveTabChange),this.seeAllTopics.forEach((t=>{t.removeEventListener("click",this.handleSeeAll)})),this.seeAllCommunities.forEach((t=>{t.removeEventListener("click",this.handleSeeAllCommunities)}))}render(){return c`<div>\n ${"posts"===this.activeTab?c`<slot name="posts"></slot>`:""}\n ${"communities"===this.activeTab?c`<slot name="communities"></slot>`:""}\n ${"relatedTopics"===this.activeTab?c`<slot name="relatedTopics"></slot>`:""}\n </div>`}};h.styles=[e,n`:host{display:block}`],i([s()],h.prototype,"activeTab",void 0),h=i([a("topic-right-rail")],h);
//# sourceMappingURL=topic-page-client-js-f0961b1b.js.map
