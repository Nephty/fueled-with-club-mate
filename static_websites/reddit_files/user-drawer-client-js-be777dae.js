import"./faceplate-switch-input-93a51eeb.js";import{_ as e,n as t,e as s,eG as n,fd as a,aG as i,aH as o,fe as r,eH as l,ff as c,fg as d,fh as h,fi as p,W as u,dU as y,r as m,q as b,a as f,d_ as v,t as k,e0 as C}from"./shell-0c1a6a5f.js";import{s as g,x}from"./icon-d63689a2.js";import{u as w}from"./community-colors-1abc736f.js";import{D as E}from"./display-theme-7e251d41.js";import{s as T}from"./translations-1d1a7d78.js";import"./checked-input-element-82c4f474.js";import"./faceplate-input-13282be3.js";import"./input-element-79efc63d.js";import"./form-common-utils-9ca05afe.js";let j=class extends g{constructor(){super(...arguments),this.enabled=!1,this.country=""}handler(e){e.preventDefault(),n({country:this.country,name:a,value:this.enabled?"false":"true"}),window.location.reload()}render(){return x`<div @click="${this.handler}" @keypress="${this.handler}">\n <slot></slot>\n </div>`}};e([t({type:Boolean})],j.prototype,"enabled",void 0),e([t({type:String})],j.prototype,"country",void 0),j=e([s("shreddit-modmode-setter")],j);let S=class extends g{constructor(){super(...arguments),this.enabled=!1,this.country="",this.cookieDomain="",this.sync=!1}async connectedCallback(){super.connectedCallback(),this.sync&&this.syncCookieToUserPreference()}async syncCookieToUserPreference(){try{const{data:e}=await i({operation:o.IdentityUserPreferences,variables:{includeNightMode:!0}}),t=e.identity?.preferences?.isNightModeEnabled;if(null==t)return;t!==this.enabled&&(this.enabled=t,this.updateClientStyles(),this.setCookie(),this.reportMismatch())}catch{}}setCookie(){n({country:this.country,name:r,value:this.enabled?E.Darkmode:E.Lightmode,options:{...l,domain:this.cookieDomain||void 0}})}async setUserPreference(){await i({operation:o.UpdateAccountPreferences,variables:{input:{isNightModeEnabled:this.enabled}}})}updateClientStyles(){w({isDarkMode:this.enabled});const e=this.querySelector("faceplate-switch-input");e&&(e.checked=this.enabled)}reportMismatch(){const e=c(this.country)&&!d(),t={cookies_enabled:navigator.cookieEnabled&&!e?"true":"false"};h({type:p.Counter,name:"shreddit_darkmode_preference_mismatches",value:1,labels:t})}async handler(e){e.preventDefault(),this.enabled=!this.enabled,this.updateClientStyles(),this.setCookie(),await this.setUserPreference()}handleKeypress(e){"Enter"!==e.key&&"Space"!==e.key||this.handler(e)}render(){return x`<div @click="${this.handler}" @keypress="${this.handleKeypress}">\n <community-colors></community-colors>\n <slot></slot>\n </div>`}};e([t({type:Boolean,reflect:!0})],S.prototype,"enabled",void 0),e([t({type:String})],S.prototype,"country",void 0),e([t({type:String,attribute:"cookie-domain"})],S.prototype,"cookieDomain",void 0),e([t({type:Boolean})],S.prototype,"sync",void 0),S=e([s("shreddit-darkmode-setter")],S);let D=class extends(u(g)){constructor(){super(...arguments),this.translationContextValue=y,this.pubsub=new m(this)}updateTranslationSetting(e){const t=new CustomEvent("update-translation-context",{bubbles:!0,composed:!0,detail:{...this.translationContextValue,isTranslationActive:e}});this.dispatchEvent(t),this.pubsub.publish(b.I18nPostTranslationOverride,{isContextUpdateEvent:!0,isTranslationActive:e,id:""})}async handleEvent(e){e.preventDefault(),this.trackEvent(T({isImmersiveTranslationsActive:!this.translationContextValue.isTranslationActive})),this.updateTranslationSetting(!this.translationContextValue.isTranslationActive)}handleKeypress(e){"Enter"!==e.key&&"Space"!==e.key||this.handleEvent(e)}render(){return x`<div \n data-testid="translation-setting-click-setter-button" \n @click="${this.handleEvent}" \n @keypress="${this.handleKeypress}" \n class="flex justify-between items-center pr-md cursor-pointer hover:bg-neutral-background-hover" \n tabindex="0" \n role="button" \n arial-label="Translation setting" \n>\n <slot></slot>\n <faceplate-switch-input \n data-testid="translation-setting-click-setter-switch-input" \n class="m-0 [&_label]:hidden" \n ?checked="${!!this.translationContextValue.isTranslationActive}" \n name="translation-settings-list-input" \n></faceplate-switch-input>\n </div>`}};D.styles=[f],e([v({context:C,subscribe:!0}),k()],D.prototype,"translationContextValue",void 0),D=e([s("translation-setting-click-setter")],D);
//# sourceMappingURL=user-drawer-client-js-be777dae.js.map
