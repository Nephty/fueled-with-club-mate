import"./shreddit-slotter-a1a8f833.js";import"./faceplate-tabpanel-aca84962.js";import"./auth-flow-modal-ab263143.js";import"./auth-text-input-ad4b16fd.js";import"./auth-flow-sso-buttons-e02a03ba.js";import"./shreddit-overlay-display-21a59757.js";import"./shreddit-signup-drawer-2194806d.js";import{a as t,_ as e,n as s,t as i,E as o,O as a,J as n,e as r,ay as l}from"./shell-0c1a6a5f.js";import{S as h}from"./scroll-blocker-0b09ba61.js";import{O as p,D as d}from"./constants-80532729.js";import{s as c,A as m,x as u,l as f}from"./icon-d63689a2.js";import"./pageable-832f4cce.js";import"./index-af369f38.js";import"./contextualSignupPrompt-e2b45125.js";import"./faceplate-text-input-81d8669b.js";import"./live-daee7cff.js";import"./text-input-120feb09.js";import"./form-common-utils-9ca05afe.js";import"./faceplate-input-13282be3.js";import"./input-element-79efc63d.js";import"./light-dom-slot-controller-0b9fcecb.js";import"./auth-flow-controller-5c006db1.js";import"./reload-to-logged-in-df49e647.js";import"./index-4c038ed4.js";import"./load-lazy-script-with-nonce-91b572d7.js";import"./with-recaptcha-198191f5.js";import"./onboarding-037c890c.js";import"./shreddit-overlay-aaa5eeef.js";let b=l,g=window.location,j=class extends c{constructor(){super(...arguments),this.stepName=null,this.isStandalonePage=!1,this.open=!1,this.history=[],this.events=new o(this),this.scrollBlocker=new h(this),this.findStepElement=t=>this.querySelector(`[slot="${t}"]`),this.requestClose=()=>{this.blocking?this.isStandalonePage&&this.redirectToHome():this.close()},this.redirectToHome=()=>{g.href=location.origin},this.handleEscKey=this.events.define("keydown",(t=>{"Escape"!==t.key||this.blocking||this.close()})),this.onShredditSlot=this.events.define("shreddit-slotter-set-slot-name",(t=>{!t.defaultPrevented&&this.hasStep(t.detail.slotName)&&(t.preventDefault(),this.show(t.detail.slotName))})),this.handleDismissOverlay=this.events.define("dismiss-overlay",this.requestClose),this.handleAccountManagerDismissed=this.events.define("accountmanager-dismissed",this.requestClose),this.deprecated__onFaceplateTrack=this.events.define("faceplate-track",(t=>{const{source:e,action:s,noun:i}=t.detail;e===p&&s===d&&a.has(i)&&this.requestClose()}))}get blocking(){if(this.isStandalonePage)return!0;if(this.open&&this.stepName){return!!this.findStepElement(this.stepName)?.getAttribute("blocking")}return!1}connectedCallback(){super.connectedCallback(),null!==this.stepName&&this.show(this.stepName)}hasStep(t){return!!this.findStepElement(t)}async show(t,e){const s=this.findStepElement(t),i=s?.getAttribute("feature-name");if(!s||!i)return!1;try{await b({root:s,name:i,renderMode:n.Contents,...e,queryParams:{...e?.queryParams,is_standalone:this.isStandalonePage}})}finally{this.open=!0,this.history.push(t),this.stepName=t,this.scrollBlocker.blockPageScrolling()}return!0}back(){if(!this.open)return;this.history.pop();const t=this.history.at(-1);if(!t)return this.requestClose();this.stepName=t}close(){this.open=!1,this.stepName=null,this.history=[],this.scrollBlocker.unblockPageScrolling()}render(){return this.open?u`\n <div class="z-[100] fixed">\n <div \n class="${f(this.isStandalonePage?void 0:"fixed top-0 right-0 bottom-0 left-0 bg-black opacity-50 backdrop-blur-sm")}" \n tabindex="-1" \n @click="${this.requestClose}" \n></div>\n <slot name="${this.stepName}"></slot>\n <slot></slot>\n </div>\n `:m}};j.styles=[t],e([s({attribute:"step-name",type:String,reflect:!0})],j.prototype,"stepName",void 0),e([s({attribute:"is-standalone",type:Boolean})],j.prototype,"isStandalonePage",void 0),e([i()],j.prototype,"open",void 0),j=e([r("auth-flow-manager")],j);
//# sourceMappingURL=auth-overlay-client-js-49a69c26.js.map
