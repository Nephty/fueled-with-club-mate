{% extends 'master.html' %}

{% block head %}

<script>
#input {
  font-weight: bold; 
}
</script>

{% endblock %}

{% block content %}

  <div class="columns is-mobile" style="">

    <div class="column is-1">
      <aside class="menu has-text-centered">
        <ul>
          <li>
            <button class="button is-danger">
              <i class="mdi mdi-flashlight"></i>
            </button>
          </li>
          <br>
          <li>
            <button class="button is-danger">
              <i class="mdi mdi-blur"></i>
            </button>
          </li>
        </ul>
      </aside>
    </div>

    <div class="column" style="height: 100vh; display: flex;">
      <object id="website" type="text/html" data="{{html}}" style="width: 100%;" class="pr-4">
      </object>
    </div>

  </div>

<div class="modal" id="myModal">
  <div class="modal-background" style="background: transparent;"></div>
  <div class="modal-content">
    <input id="input" class="input is-rounded is-info has-text-centered" type="text" style="border:none; outline:none; color:white; background: rgba(50, 50, 100, 0.7); letter-spacing: 0.1rem;"/>
  </div>
  <button class="modal-close is-large" aria-label="close"></button>
</div>

<script>
const modal = document.getElementById("myModal");
document.addEventListener("keydown", function () {
  if (!modal.classList.contains("is-active") && event.key.length === 1 && event.key.match(/[a-zA-Z]/)) {
    modal.classList.add("is-active");
    const input = document.getElementById("input");
    input.value = "";
    input.focus();
    
  }
  if (event.key === "Escape") {
    modal.classList.remove("is-active");
  }
  if (event.key === "Enter") {
    const input = document.getElementById("input");
    console.log(input.value);
    // animation 
    modal.classList.remove("is-active");
  }
});
document.querySelectorAll(".modal-close, .modal-background").forEach((element) => {
  element.addEventListener("click", function () {
    const modal = document.getElementById("myModal");
    modal.classList.remove("is-active"); // Close the modal
  });
});
</script>

<script>
const objectElement = document.getElementById('website');

// Wait for the object to load its content
objectElement.addEventListener('load', function() {
    // Get the embedded document
    const embeddedDocument = objectElement.contentDocument || objectElement.contentWindow.document;

    // Access elements inside the embedded document
    const metaTag = embeddedDocument.querySelector('meta#answer');
    const answer = metaTag ? metaTag.getAttribute('answer') : null;

    console.log("Answer:", answer); // Logs: something
});
</script>

{% endblock %}
